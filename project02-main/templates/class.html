<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Details - {{ class_obj.class_id }} - E-Class Record</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/class-page.css') }}">
</head>

<body class="bg-gray-100 p-4 sm:p-6 lg:p-8">
    <div class="container">
        <div class="header">
            <a href="/instructor-dashboard" class="back-link">
                ‚Üê Back to Dashboard
            </a>
            <div class="header-content">
                <div class="class-title">
                    <h1>{{ class_obj.class_id }}</h1>
                    <span class="class-badge">{{ class_obj.course }} - {{ class_obj.track }}</span>
                </div>
                <div class="header-actions">
                    <a href="#" class="btn btn-secondary" onclick="exportClassData()">
                        üìä Export Data
                    </a>
                    <a href="/instructor-dashboard" class="btn btn-primary">
                        ‚Üê Dashboard
                    </a>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="flex border-b border-gray-200 mb-6 card rounded-b-none p-0">
            <button class="tab-button active flex-1 text-center" onclick="showTab('masterlist-tab')">Student Masterlist</button>
            <button class="tab-button flex-1 text-center" onclick="showTab('grading-config-tab')">Grading Configuration</button>
            <button class="tab-button flex-1 text-center" onclick="showTab('grade-input-tab')">Grade Input</button>
        </div>

        <!-- Student Masterlist Tab -->
        <div id="masterlist-tab" class="tab-content active card">
            <h2 class="text-2xl font-semibold text-gray-700 mb-4">Student Masterlist - {{ class_obj.class_id }}</h2>

            <!-- Class Statistics -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">{{ total_students }}</div>
                    <div class="stat-label">Total Students</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ class_obj.section }}</div>
                    <div class="stat-label">Section</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ class_obj.year }}</div>
                    <div class="stat-label">Year</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ class_obj.semester }}</div>
                    <div class="stat-label">Semester</div>
                </div>
            </div>

            {% if students %}
            <div class="overflow-x-auto">
                <table class="masterlist-table">
                    <thead>
                        <tr>
                            <th>Student</th>
                            <th>School ID</th>
                            <th>Course</th>
                            <th>Year Level</th>
                            <th>Section</th>
                            <th>Enrollment Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for student in students %}
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">
                                        {{ student.school_id[0] }}
                                    </div>
                                    <div>
                                        <strong>{{ student.student_name }}</strong>
                                        {% if student.track %}
                                        <br><small style="color: #666;">{{ student.track }}</small>
                                        {% endif %}
                                    </div>
                                </div>
                            </td>
                            <td>{{ student.school_id }}</td>
                            <td>{{ student.course }}</td>
                            <td>{{ student.year_level }}</td>
                            <td>{{ student.section }}</td>
                            <td>{{ student.joined_at.split('T')[0] if student.joined_at else 'N/A' }}</td>
                            <td><span class="status-badge status-active">Active</span></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="empty-state">
                <h3>No Students Enrolled</h3>
                <p>Students will appear here once they join using the class join code.</p>
                <div style="margin-top: 20px; padding: 15px; background: #d1fae5; border-radius: 8px; border: 1px solid #10b981;">
                    <strong>Join Code: {{ class_obj.join_code }}</strong>
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Grading Configuration Tab -->
        <div id="grading-config-tab" class="tab-content card hidden">
            <h2 class="text-2xl font-semibold text-gray-700 mb-4">Grading Configuration for {{ class_obj.class_id }}</h2>

            <div class="flex justify-between items-center mb-4">
                <button class="btn-primary" onclick="openAddCategoryModal()">Add Grading Category</button>
                <button class="btn-secondary bg-green-100 text-green-800 border-green-300 hover:bg-green-200" onclick="loadDefaultGradingOptions()">Load Default Grading Options</button>
            </div>

            <div id="grading-categories-display">
                <div id="categories-list" class="grading-categories">
                    <!-- Categories will be injected here by JavaScript -->
                    <div class="empty-state">
                        <p>No grading categories defined yet.</p>
                        <p>Click "Add Grading Category" to get started!</p>
                    </div>
                </div>
                <p class="mt-4 text-right text-sm text-gray-600">Total Category Weight: <span id="total-category-weight">0</span>%</p>
            </div>
        </div>

        <!-- Grade Input Tab -->
        <div id="grade-input-tab" class="tab-content card hidden">
            <h2 class="text-2xl font-semibold text-gray-700 mb-4">Grade Input for {{ class_obj.class_id }}</h2>

            <div id="grade-input-area">
                <p class="text-gray-500 text-center py-8">Configure grading categories first in the "Grading Configuration" tab to input grades.</p>
            </div>

            <div id="grade-input-actions" class="mt-6 flex justify-end space-x-4 hidden">
                <button class="btn-secondary">Export to CSV</button>
                <button class="btn-secondary">Export to JSON</button>
                <button class="btn-primary">Release Grades</button>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let gradingCategories = [];
        let currentClassData = {
            id: '{{ class_obj.id }}',
            classId: '{{ class_obj.class_id }}',
            students: []
        };

        // Initialize students data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Students data will be handled by the template rendering
            // The students array is already available in the template scope
        });

        // Tab management
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
            document.getElementById(tabId).classList.remove('hidden');

            document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
            event.target.classList.add('active');

            if (tabId === 'grade-input-tab' && gradingCategories.length > 0) {
                renderGradeInputTable();
            }
        }

        // Modal management
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Generate unique ID
        function generateUniqueId() {
            return '_' + Math.random().toString(36).substr(2, 9);
        }

        // Load default grading options
        function loadDefaultGradingOptions() {
            Swal.fire({
                title: 'Load Default Grading Options',
                text: 'This will replace your current grading configuration with the default structure. This action cannot be undone.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Yes, Load Defaults'
            }).then((result) => {
                if (result.isConfirmed) {
                    gradingCategories = [
                        {
                            id: generateUniqueId(),
                            name: 'Lecture',
                            weight: 60,
                            assessments: [
                                { id: generateUniqueId(), name: 'Attendance', weight: 5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Assignment 1', weight: 5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Assignment 2', weight: 5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Assignment 3', weight: 5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Quiz 1', weight: 7.5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Quiz 2', weight: 7.5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Prelim Exam', weight: 15, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Midterm Exam', weight: 25, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Final Exam', weight: 25, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Project', weight: 10, maxScore: 100, passingScore: null }
                            ]
                        },
                        {
                            id: generateUniqueId(),
                            name: 'Laboratory',
                            weight: 40,
                            assessments: [
                                { id: generateUniqueId(), name: 'Lab Attendance', weight: 5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Lab Assignment 1', weight: 5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Lab Assignment 2', weight: 5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Lab Assignment 3', weight: 5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Lab Quiz 1', weight: 7.5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Lab Quiz 2', weight: 7.5, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Lab Prelim Exam', weight: 15, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Lab Midterm Exam', weight: 25, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Lab Final Exam', weight: 25, maxScore: 100, passingScore: null },
                                { id: generateUniqueId(), name: 'Lab Project', weight: 10, maxScore: 100, passingScore: null }
                            ]
                        }
                    ];

                    renderGradingConfiguration();
                    Swal.fire({
                        icon: 'success',
                        title: 'Default Options Loaded',
                        text: 'Default grading configuration has been loaded successfully.',
                        timer: 2000,
                        showConfirmButton: false
                    });
                }
            });
        }

        // Render grading configuration
        function renderGradingConfiguration() {
            const container = document.getElementById('categories-list');
            const totalWeightElement = document.getElementById('total-category-weight');

            if (gradingCategories.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <p>No grading categories defined yet.</p>
                        <p>Click "Add Grading Category" to get started!</p>
                    </div>
                `;
                totalWeightElement.textContent = '0';
                return;
            }

            let html = '';
            let totalWeight = 0;

            gradingCategories.forEach(category => {
                totalWeight += category.weight;
                const assessmentWeightsSum = category.assessments.reduce((sum, assessment) => sum + (assessment.weight || 0), 0);

                html += `
                    <div class="category-card">
                        <div class="category-header">
                            <span class="category-title">${category.name}</span>
                            <span class="category-weight">${category.weight}%</span>
                            <div class="assessment-actions">
                                <button class="btn-sm btn-edit" onclick="editCategory('${category.id}')">Edit</button>
                                <button class="btn-sm btn-delete" onclick="deleteCategory('${category.id}')">Delete</button>
                            </div>
                        </div>
                        <div class="assessments-list">
                            ${category.assessments.map(assessment => `
                                <div class="assessment-item">
                                    <div class="assessment-info">
                                        <div class="assessment-name">${assessment.name}</div>
                                        <div class="assessment-details">
                                            Max Score: ${assessment.maxScore}${assessment.weight ? `, Weight: ${assessment.weight}%` : ''}
                                        </div>
                                    </div>
                                    <div class="assessment-actions">
                                        <button class="btn-sm btn-edit" onclick="editAssessment('${category.id}', '${assessment.id}')">Edit</button>
                                        <button class="btn-sm btn-delete" onclick="deleteAssessment('${category.id}', '${assessment.id}')">Delete</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
            totalWeightElement.textContent = totalWeight;

            if (totalWeight !== 100) {
                totalWeightElement.style.color = '#ef4444';
            } else {
                totalWeightElement.style.color = '#10b981';
            }
        }

        // Category management
        function openAddCategoryModal() {
            document.getElementById('category-modal-title').textContent = 'Add Grading Category';
            document.getElementById('category-name').value = '';
            document.getElementById('category-weight').value = '';
            document.getElementById('current-category-id').value = '';
            openModal('category-modal');
        }

        function editCategory(categoryId) {
            const category = gradingCategories.find(cat => cat.id === categoryId);
            if (category) {
                document.getElementById('category-modal-title').textContent = 'Edit Grading Category';
                document.getElementById('category-name').value = category.name;
                document.getElementById('category-weight').value = category.weight;
                document.getElementById('current-category-id').value = category.id;
                openModal('category-modal');
            }
        }

        function deleteCategory(categoryId) {
            Swal.fire({
                title: 'Delete Category?',
                text: 'This will delete the category and all its assessments. This cannot be undone.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Yes, Delete'
            }).then((result) => {
                if (result.isConfirmed) {
                    gradingCategories = gradingCategories.filter(cat => cat.id !== categoryId);
                    renderGradingConfiguration();
                }
            });
        }

        // Assessment management
        function openAddAssessmentModal(categoryId) {
            const category = gradingCategories.find(cat => cat.id === categoryId);
            if (category) {
                document.getElementById('assessment-modal-title').textContent = 'Add Assessment';
                document.getElementById('assessment-name').value = '';
                document.getElementById('assessment-weight').value = '';
                document.getElementById('assessment-max-score').value = '100';
                document.getElementById('assessment-passing-score').value = '';
                document.getElementById('current-category-id').value = categoryId;
                document.getElementById('current-assessment-id').value = '';
                openModal('assessment-modal');
            }
        }

        function editAssessment(categoryId, assessmentId) {
            const category = gradingCategories.find(cat => cat.id === categoryId);
            const assessment = category ? category.assessments.find(ass => ass.id === assessmentId) : null;

            if (assessment) {
                document.getElementById('assessment-modal-title').textContent = 'Edit Assessment';
                document.getElementById('assessment-name').value = assessment.name;
                document.getElementById('assessment-weight').value = assessment.weight || '';
                document.getElementById('assessment-max-score').value = assessment.maxScore;
                document.getElementById('assessment-passing-score').value = assessment.passingScore || '';
                document.getElementById('current-category-id').value = categoryId;
                document.getElementById('current-assessment-id').value = assessment.id;
                openModal('assessment-modal');
            }
        }

        function deleteAssessment(categoryId, assessmentId) {
            Swal.fire({
                title: 'Delete Assessment?',
                text: 'This will delete the assessment and all student scores. This cannot be undone.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Yes, Delete'
            }).then((result) => {
                if (result.isConfirmed) {
                    const category = gradingCategories.find(cat => cat.id === categoryId);
                    if (category) {
                        category.assessments = category.assessments.filter(ass => ass.id !== assessmentId);
                        renderGradingConfiguration();
                    }
                }
            });
        }

        // Form submissions
        document.getElementById('category-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('category-name').value;
            const weight = parseInt(document.getElementById('category-weight').value);
            const editId = document.getElementById('current-category-id').value;

            if (editId) {
                const category = gradingCategories.find(cat => cat.id === editId);
                if (category) {
                    category.name = name;
                    category.weight = weight;
                }
            } else {
                gradingCategories.push({
                    id: generateUniqueId(),
                    name: name,
                    weight: weight,
                    assessments: []
                });
            }

            closeModal('category-modal');
            renderGradingConfiguration();
            this.reset();
        });

        document.getElementById('assessment-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('assessment-name').value;
            const weight = parseInt(document.getElementById('assessment-weight').value) || null;
            const maxScore = parseInt(document.getElementById('assessment-max-score').value);
            const passingScore = document.getElementById('assessment-passing-score').value ?
                parseInt(document.getElementById('assessment-passing-score').value) : null;
            const categoryId = document.getElementById('current-category-id').value;
            const editId = document.getElementById('current-assessment-id').value;

            const category = gradingCategories.find(cat => cat.id === categoryId);
            if (category) {
                if (editId) {
                    const assessment = category.assessments.find(ass => ass.id === editId);
                    if (assessment) {
                        assessment.name = name;
                        assessment.weight = weight;
                        assessment.maxScore = maxScore;
                        assessment.passingScore = passingScore;
                    }
                } else {
                    category.assessments.push({
                        id: generateUniqueId(),
                        name: name,
                        weight: weight,
                        maxScore: maxScore,
                        passingScore: passingScore
                    });
                }

                closeModal('assessment-modal');
                renderGradingConfiguration();
                this.reset();
            }
        });

        // Render grade input table
        function renderGradeInputTable() {
            const container = document.getElementById('grade-input-area');
            const actionsContainer = document.getElementById('grade-input-actions');

            if (gradingCategories.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <p>Configure grading categories first in the "Grading Configuration" tab to input grades.</p>
                    </div>
                `;
                actionsContainer.classList.add('hidden');
                return;
            }

            actionsContainer.classList.remove('hidden');

            const allAssessments = [];
            gradingCategories.forEach(category => {
                category.assessments.forEach(assessment => {
                    allAssessments.push({ ...assessment, categoryName: category.name });
                });
            });

            let html = `
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Student Name</th>
            `;

            allAssessments.forEach(assessment => {
                html += `
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        ${assessment.name}<br>
                        <span class="font-normal text-gray-400">(${assessment.maxScore}${assessment.weight ? `, ${assessment.weight}%` : ''})</span>
                    </th>
                `;
            });

            html += `
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Final Grade</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
            `;

            currentClassData.students.forEach(student => {
                html += `<tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${student.name}</td>`;

                allAssessments.forEach(assessment => {
                    const score = student.grades[assessment.id] !== undefined && student.grades[assessment.id] !== null ? student.grades[assessment.id] : '';
                    html += `
                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                            <input
                                type="number"
                                class="w-20 p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                value="${score}"
                                min="0" max="${assessment.maxScore}"
                                onchange="updateStudentGrade('${student.id}', '${assessment.id}', this.value)"
                            />
                        </td>
                    `;
                });

                const finalGrade = calculateFinalGrade(student);
                const isPassed = finalGrade !== null && finalGrade >= 75;
                const statusClass = isPassed ? 'text-green-600' : 'text-red-600';

                html += `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium ${statusClass}">
                        ${finalGrade !== null ? finalGrade.toFixed(2) + '%' : 'N/A'}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium ${statusClass}">
                        ${finalGrade !== null ? (isPassed ? 'Passed' : 'Failed') : 'N/A'}
                    </td>
                </tr>`;
            });

            html += `
                        </tbody>
                    </table>
                </div>
            `;

            container.innerHTML = html;
        }

        // Update student grade
        function updateStudentGrade(studentId, assessmentId, newScore) {
            const student = currentClassData.students.find(s => s.id === studentId);
            if (student) {
                student.grades[assessmentId] = newScore === '' ? null : parseFloat(newScore);
                renderGradeInputTable();
            }
        }

        // Calculate final grade for a student
        function calculateFinalGrade(student) {
            if (!gradingCategories.length) return null;

            let totalWeightedScore = 0;
            let totalWeight = 0;

            gradingCategories.forEach(category => {
                if (category.weight > 0) {
                    const gradedAssessments = category.assessments.filter(ass =>
                        student.grades[ass.id] !== null && student.grades[ass.id] !== undefined
                    );

                    if (gradedAssessments.length > 0) {
                        let categoryScore = 0;
                        gradedAssessments.forEach(assessment => {
                            const scorePercentage = (student.grades[assessment.id] / assessment.maxScore) * 100;
                            categoryScore += scorePercentage * (assessment.weight || 0);
                        });

                        const categoryAssessmentsTotalWeight = category.assessments.reduce((sum, ass) => sum + (ass.weight || 0), 0);
                        if (categoryAssessmentsTotalWeight > 0) {
                            categoryScore = (categoryScore / categoryAssessmentsTotalWeight) * category.weight;
                        }

                        totalWeightedScore += categoryScore;
                        totalWeight += category.weight;
                    }
                }
            });

            return totalWeight > 0 ? totalWeightedScore / totalWeight : null;
        }

        // Export and utility functions
        function exportClassData() {
            Swal.fire({
                title: 'Export Class Data',
                text: 'Select the format for export:',
                icon: 'question',
                input: 'select',
                inputOptions: {
                    'excel': 'Excel Spreadsheet',
                    'pdf': 'PDF Document',
                    'csv': 'CSV File'
                },
                showCancelButton: true,
                confirmButtonText: 'Export'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        icon: 'info',
                        title: 'Exporting...',
                        text: `Preparing ${result.value.toUpperCase()} export...`,
                        timer: 2000,
                        showConfirmButton: false
                    });
                }
            });
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            Swal.fire({
                title: `Welcome to ${currentClassData.classId}`,
                text: 'Manage your class, view students, and configure grading settings.',
                icon: 'info',
                timer: 3000,
                showConfirmButton: false,
                toast: true,
                position: 'top-end',
                background: '#e0f2fe',
                color: '#0c4a6e'
            });

            renderGradingConfiguration();
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
    </script>

    <!-- Category Modal -->
    <div id="category-modal" class="modal">
        <div class="modal-content">
            <h3 id="category-modal-title" class="text-xl font-semibold mb-4">Add Grading Category</h3>
            <form id="category-form">
                <input type="hidden" id="current-category-id">
                <div class="mb-4">
                    <label for="category-name" class="block text-sm font-medium text-gray-700">Category Name</label>
                    <input type="text" id="category-name" class="form-input mt-1" required>
                </div>
                <div class="mb-4">
                    <label for="category-weight" class="block text-sm font-medium text-gray-700">Weight (%)</label>
                    <input type="number" id="category-weight" class="form-input mt-1" min="0" max="100" required>
                </div>
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" class="btn-secondary" onclick="closeModal('category-modal')">Cancel</button>
                    <button type="submit" class="btn-primary">Save Category</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Assessment Modal -->
    <div id="assessment-modal" class="modal">
        <div class="modal-content">
            <h3 id="assessment-modal-title" class="text-xl font-semibold mb-4">Add Assessment</h3>
            <form id="assessment-form">
                <input type="hidden" id="current-assessment-id">
                <div class="mb-4">
                    <label for="assessment-name" class="block text-sm font-medium text-gray-700">Assessment Name</label>
                    <input type="text" id="assessment-name" class="form-input mt-1" required>
                </div>
                <div class="mb-4">
                    <label for="assessment-weight" class="block text-sm font-medium text-gray-700">Weight (%) (Optional)</label>
                    <input type="number" id="assessment-weight" class="form-input mt-1" min="0" max="100">
                </div>
                <div class="mb-4">
                    <label for="assessment-max-score" class="block text-sm font-medium text-gray-700">Max Score</label>
                    <input type="number" id="assessment-max-score" class="form-input mt-1" min="1" required>
                </div>
                <div class="mb-4">
                    <label for="assessment-passing-score" class="block text-sm font-medium text-gray-700">Passing Score (Optional)</label>
                    <input type="number" id="assessment-passing-score" class="form-input mt-1" min="0">
                </div>
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" class="btn-secondary" onclick="closeModal('assessment-modal')">Cancel</button>
                    <button type="submit" class="btn-primary">Save Assessment</button>
                </div>
            </form>
        </div>
    </div>
</body>

</html>